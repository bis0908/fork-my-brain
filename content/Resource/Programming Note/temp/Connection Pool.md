---
tags:
  - ConnectionPool
Create at: 2022-04-13
---
---

1. Ref
    1. [https://brownbears.tistory.com/289](https://brownbears.tistory.com/289)
    2. [https://beaniejoy.tistory.com/24](https://beaniejoy.tistory.com/24)

> 커넥션 풀(Connection Pool)은 데이터베이스와 애플리케이션 간의 효율적인 연결 관리를 위해 사용되는 기법이다. 이는 데이터베이스와의 연결을 요청할 때마다 새롭게 연결을 생성하고 종료하는 비용을 줄이고, 성능을 향상시키기 위해 고안된 것이다.

---

### **커넥션 풀의 기본 동작 원리**

1. **미리 생성된 연결 유지**  
    애플리케이션이 시작될 때 일정 수의 데이터베이스 연결(Connection)을 미리 생성해 둔다. 
    이 연결들은 풀(Pool)이라는 메모리 공간에 저장된다.
    
2. **요청 시 연결 제공**  
    클라이언트가 데이터베이스에 접근하려 할 때, 커넥션 풀은 이미 생성되어 있는 연결 중 
    하나를 할당한다. 이렇게 하면 새로운 연결을 생성하는 시간이 절약된다.
    
3. **작업 완료 후 반환**  
    클라이언트가 데이터베이스 작업을 마치면, 사용했던 연결을 종료하지 않고 다시 커넥션 풀에 
    반환한다. 이 반환된 연결은 다른 요청에서 재사용될 수 있다.    

---

### **커넥션 풀이 필요한 이유**

1. **성능 향상**  
    데이터베이스와의 연결은 네트워크 통신과 인증 과정을 포함하기 때문에, 매번 연결을 생성하고 종료하면 많은 비용이 든다. 커넥션 풀은 이러한 비용을 줄여 성능을 높이는 데 기여한다.
    
2. **리소스 관리 최적화**  
    연결 수가 많아지면 데이터베이스 서버의 리소스가 부족해질 수 있다. 커넥션 풀은 연결 수를 
    제한하여 데이터베이스의 안정성을 유지하도록 돕는다.
    
3. **동시성 처리 강화**  
    여러 사용자가 동시에 데이터베이스에 접근할 때, 커넥션 풀은 효율적으로 연결을 관리하여 
    요청 처리가 지연되지 않도록 한다.
    

---

### **커넥션 풀의 주요 구성 요소**

- **최대 연결 수(Maximum Pool Size)**  
    풀에서 유지할 수 있는 최대 연결의 개수를 의미한다. 적절히 설정하지 않으면 과도한 연결로 
    인해 데이터베이스가 과부하될 수 있다.
    
- **초기 연결 수(Initial Pool Size)**  
    애플리케이션 시작 시 생성되는 초기 연결의 수를 설정한다. 초기 연결 수가 충분하면 
    초기 요청에 대해 빠르게 응답할 수 있다.
    
- **유휴 연결(Idle Connections)**  
    사용되지 않고 대기 상태에 있는 연결이다. 유휴 연결이 많으면 메모리를 낭비할 수 있으므로, 
    일정 시간 후 연결을 제거하는 설정이 필요할 수 있다.
    

---

### **장점**

- 데이터베이스 연결 생성 및 종료에 드는 시간을 줄인다.
- 연결 수를 제한하여 데이터베이스 과부하를 방지한다.
- 동시 접속 처리 능력을 향상시킨다.

### **단점 및 주의점**

- 풀의 크기를 잘못 설정하면 성능에 영향을 줄 수 있다. 예를 들어, 너무 작은 크기는 대기 시간을 
  증가시키고, 너무 큰 크기는 데이터베이스 자원을 낭비하게 된다.
- 커넥션 풀이 비효율적으로 관리되면 리소스 누수가 발생할 수 있다. 이를 방지하기 위해 사용 후 
  반드시 반환해야 한다.

---

### 결론

커넥션 풀은 데이터베이스와 애플리케이션 간의 연결 관리 효율성을 높여 성능과 안정성을 향상시키는 중요한 기술이다. 적절히 구성된 커넥션 풀은 대규모 시스템에서 필수적인 요소이며, 이를 잘 활용하는 것이 개발자의 중요한 역할 중 하나가 된다.