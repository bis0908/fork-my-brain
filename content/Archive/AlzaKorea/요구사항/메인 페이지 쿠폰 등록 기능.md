---
tags:
  - design/implements
---
---
##### 2. 메인 페이지 쿠폰 등록 기능
- 메인페이지에서 특정 문구 혹은 코드 입력시 n시간 or n-day 쿠폰을 계정당 1개 발급하는 기능.

###### 2.1. 관리자 관점 설계
1. 쿠폰 spec
	1. 쿠폰명 입력받기 - 랜덤 생성 기능도 있으면 재미있을듯!
	2. 쿠폰 기능 ON/OFF 기능 필요.
	3. 쿠폰 코드 설정 기능 필요.
	4. 1 : N (하나의 쿠폰 코드는 다수가 사용할 수 있다)
	5. 만료일 존재.
3. 시간 / 일 쿠폰 설정
	1. 시간: 숫자 입력
	2. 일: 날짜 선택
4. 쿠폰 관리 게시판
	2. 신규 쿠폰 등록
		1. API: /admin/setCouponInfo
	3. 등록된 쿠폰 관리 (data-table.js)
		1. 쿠폰 정보 호출
			1. /admin/getCouponInfo
		2. 쿠폰 정보 변경
			1. /admin/changeCouponInfo
5. 사용자 관점
	1. 등록한 쿠폰 리스트
	2. "사용" 버튼 누를시 시간 or 일 추가 등록 (마일리지 추가 X)

###### 2.2. 쿠폰 사용 시나리오
1. [x] 관리자가 쿠폰을 등록한다. - /admin/setCouponInfo ✅ 2023-10-13
2. [x] 사용자가 쿠폰을 입력해 등록을 시도한다. /user/regCoupon ✅ 2023-10-13
3. [x] 사용자가 입력한 쿠폰이 사용 가능한지 / 사용 했었는지 검사 -> 2개 확인. /user/isUsedCoupon ✅ 2023-12-08
	1. check "is_activated in coupon" and "used_date in coupon_used_history"
		2. [x] 사용 불가능할 경우 경고창 ✅ 2023-10-13
		3. [x] 사용 했었을 경우 경고창 ✅ 2023-10-13
		4. [x] 전혀 다른 문자열일 경우 경고창 ✅ 2023-10-13
	2. [x] 쿠폰이 사용 가능한 경우 쿠폰을 적용(계정에 등록) ✅ 2023-10-15
		1. [x] 등록 쿠폰 페이지에서 리스트 확인 가능 ✅ 2023-10-15
		2. [x] 해당 쿠폰 spec 만큼 사용시간 or 사용일을 더한다. ✅ 2023-10-16
			1. [x] wii update DB Table ✅ 2023-10-16
				1. [x] user_mileage ✅ 2023-10-16
					1. 일자 쿠폰일 경우 하루 미만의 경우 추가하는 상황도 고려해야 할듯
					2. dataType -> float
				2. [x] coupon_usage_history ✅ 2023-10-16
		3. [x] 단, 쿠폰 사용 시점은 사용자가 정한다. ✅ 2023-10-16
			1. [x] 쿠폰 사용 버튼 기능 구현 ✅ 2023-10-16