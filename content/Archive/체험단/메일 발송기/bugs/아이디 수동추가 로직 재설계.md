---
Create at: 2024-04-03
tags:
  - design
  - Nodejs
  - renamailer/troubleshooting
  - design/idea
status: done
---
---

#### 설계
1. `input` 에서 아이디 문자열을 쉼표로 구분해 배열로 저장한다.
2. 아이디가 없는데 추가 버튼이나 엔터키를 누르면 경고창 누르고 리턴.
3. 아이디 배열 중에 관리자 아이디가 있는지 api로 체크.
4. 관리자 아이디를 api로 배열로 가져온다.
5. 아이디 배열 루프를 돌면서 관리자 아이디 배열과 일치하는 문자열이 있으면 무조건 수집ID로 추가.
6. 일치하는 문자열이 아닐 경우
	1. API로 체크 (`/db/addManual`)
		1. 이 API는 먼저 입력된 아이디가 네이버 아이디와 일치하는지 검사를 한다.
		2. 일치하지 않을 경우 업데이트된 배열을 1차로 반환한다.
			1. 반환된 1차 아이디가 보낸 기록이 있는지 확인한다.
			2. 보낸 기록이 있으면 보낸 리스트를 반환한다.
				1. 없으면 수신거부를 했는지 확인한다.
			3. 수신 거부 기록이 있으면 거부 리스트를 반환한다.
				1. 없으면 업데이트된 배열을 최종 반환한다.
	2. 수집ID에 이미 있는지 체크 (`loadManager`)
	3. 보낸ID에 이미 있는지 체크
	4. 있으면 있다고 알림창 표시하고 종료.
	5. 없으면 추가 및 리스트 업데이트, 해당 `badge.length` 업데이트
	6. 