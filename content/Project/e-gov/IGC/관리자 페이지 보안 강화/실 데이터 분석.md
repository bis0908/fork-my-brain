---
Create at: 2024-02-15
tags:
  - Spring
  - Java
---
---

#### AS-IS
- 입력받은 id, pw 2가지를 만족하지 않으면 `아이디 또는 패스워드가 일치 하지 않습니다.` 경고창 표시.
- aaa,bbb 입력해도 경고창 내용은 동일함.
- selectAccountVO 쿼리 자체가 입력한 id, pw를 만족하는 행이 있는지 조회하는 쿼리.

#### TO-BE
- error case: `message`
	- ID(X), PW(X): `없는 계정 정보입니다.`
	- ID(O), PW(X) / ID(X), PW(O) : `아이디 또는 패스워드가 일치 하지 않습니다.`
		- condition: 5회 틀릴 경우 10분 계정 잠금 및 10분 후 reset.
	- ID(O), PW(O): login success

#### Implements
![[attachments/KakaoTalk_20240221_212808250.png]]
- [x] 엉뚱한 아이디인지 먼저 필터링 ✅ 2024-02-15
- Case: 아이디는 맞는데 비번은 틀릴 때
	- [x] 경고 메세지 및 로그 기록 ✅ 2024-02-20
	- 로그인 실패 count의 기준을 무엇으로 삼을 것인가?
		- 연속적으로 실패해야 함.
		- 원래 요구사항
		   ![[attachments/Pasted image 20240221210724.png]]
		- 몇 분 이내 실패 기본 조건은 없음.
		- 마지막 record 5개를 조회한다 -> 그중에 al_event가 "F"인게 몇개인지 count 한다.
		- count 5개 될때까지 실패할때마다 count는 증가함.
		- count가 5개, (현재 시간 - log_regdate) < 10분  -> 로그인 불가.
		- count 5개, (현재 시간 - log_regdate) > 10분 -> 로그인 시도 가능.
