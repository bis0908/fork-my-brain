---
Create at: 2024-02-19
tags:
  - reviewnavi
  - php
---
---

- db 구조
	- 고객 > 고객 점포 > ... 순
	- store 관리 페이지는 progress 완료개수, 진행사항 표시함.
- 신규 페이지 추가의 필요성
	- 고객중에 한번에 광고 계약을 수백건을 체결하고 이 계약을 수십개의 점포가 돌려쓰는 구조.
	- 즉 고객 > 고객 점포의 합산을 보는 페이지가 필요.
		- 예를들어 100종원 > 홍콩반점(토탈 갯수) > 홍콩반점 정자점(점포 계약 갯수), 홍콩반점 수원역점...
- 테이블 컬럼 일부 설명
	- 계약:  계약 인원 갯수 (돈 받은)
	- 완료: 리뷰등록 완료 된 개수
	- 미완료: 현재 진행중인 것
	- 잔여: 남은 광고 갯수
- 버튼 기능 개선
	- 계약 컬럼 행 좌우에 -5 ~ +5 버튼 추가
	- 사이값은 옵션.
- 코멘트 열 추가 필요
	- 히스토리 기록 용

---

|                             시나리오                              | 해결 방법 |
|:-----------------------------------------------------------------:| --------- |
| 광고 계약 총합 갯수 관리 (개별 점포 계약 갯수 제어시 초과 방지용) |           |
|                    계약 값 조절 상한/하한 값?                     |           |

 - 2024-02-26
	 - 방법1: 부모행 / 자식행 -> 1 테이블
	 - 방법2: 부모 테이블 / 자식 테이블로 분리한다. -> 2테이블
	 - 둘 중 어떤 방법을 선택하든 업주 정보 테이블을 신규 쿼리는 필요.
	 - 제반 사항부터 준비하자
---

#### 내가 알아야 하는 것
- php로 post 요청 및 받아오는 방법
	- 받아온 데이터 가공하는 방법
- 에 필요한 php 문법
- 그리고 필요한 sql 구문 작성 요령
	- 기존 쿼리 사용예 파악
		- 기존 쿼리에서 data가 어떻게 대응 되는지 파악
	- 전체 점포를 고객명으로 그룹화 count,
	- 해당 고객의 점포별 계약건 수 count

